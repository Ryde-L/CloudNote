<!DOCTYPE HTML>
<html>
<head>
    <title>注册</title>
    <link href="../lib/login/css/login.css" rel="stylesheet" type="text/css" media="all"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <!-- -->
    <script>var __links = document.querySelectorAll('a');

    function __linkClick(e) {
        parent.window.postMessage(this.href, '*');
    };
    for (var i = 0, l = __links.length; i < l; i++) {
        if (__links[i].getAttribute('data-t') == '_blank') {
            __links[i].addEventListener('click', __linkClick, false);
        }
    }</script>
    <script src="../lib/jq/jquery.min.js"></script>
    <script>$(document).ready(function (c) {
        $('.alert-close').on('click', function (c) {
            $('.message').fadeOut('slow', function (c) {
                $('.message').remove();
            });
        });
    });
    </script>
</head>
<body>
<!-- contact-form -->
<div class="message warning">
    <div class="inset">
        <div class="login-head">
            <h1>注册页面</h1>
            <div class="alert-close"></div>
        </div>
        <form id="form" onsubmit="return false" action="#" method="post">
            <li>
                <input type="text" name="username" class="text" placeholder="用户名"><a href="#" class=" icon user"></a>
            </li>
            <div class="clear"></div>
            <li>
                <input type="password" name="pwd"  placeholder="密码"> <a href="#" class="icon lock"></a>
            </li>
            <div class="clear"></div>
            <li>
                <input type="password" name="pwd_check" placeholder="确认密码"> <a href="#" class="icon lock"></a>
            </li>
            <div class="clear"></div>
            <li>
                <select type="select" name="gender" style="width: 100%">
                    <option value="1" selected>男</option>
                    <option value="2">女</option>
                </select>
            </li>
            <div class="clear"></div>

            <div class="submit" style="display: flex;justify-content: space-between">
                <input type="submit" onclick="register()" value="注册" style="display: flex;justify-content: center;">
                <input type="submit" value="去登陆" onclick='location.href=("login.html")' style="display: flex;justify-content: center;">
                <div class="clear"></div>
            </div>

        </form>
    </div>
</div>
</div>
<div class="clear"></div>
<!--- footer --->
<div class="footer">
    <!--	<p>Copyright &copy; 2014.</p>-->
</div>

<script type="text/javascript" src="../lib/jq/jquery.min.js"></script>
<script type="text/javascript" src="../lib/layer/2.4/layer.js"></script>
<script>
    function register() {
        $.ajax({
            type: "POST",
            dataType: "json",//预期服务器返回的数据类型
            url: "/user/register",
            data: $('#form').serialize(),
            success: function (data) {
                console.log(data);
                if (data['isSuccessful'] === '1')
                    location.href = 'http://localhost:8800/noteServices/path/new.html';
                else
                    layer.msg('注册失败!'+data['msg'],{icon:2,time:2000});
            },
            error: function () {
                layer.msg('发生异常!',{icon:2,time:2000});
            }
        });
    }
</script>
</body>

</html>